{"changed":true,"filter":false,"title":".bot.sh","tooltip":"/.bot.sh","value":"#!/bin/bash\n\n. .bot.properties\ninput=\"/home/ubuntu/workspace/.bot.cfg\"\necho \"NICK $nick\" > $input \necho \"USER $user\" >> $input\nfor i in \"${channels[@]}\"\n  do\n    echo \"JOIN #$i\" >> $input\ndone\n\ntail -f $input | netcat $server 6667 | while read res\ndo\n\n\n  case \"$res\" in\n    # respond to ping requests from the server\n    PING*)\n      echo \"$res\" | sed \"s/I/O/\" >> $input \n    ;;\n\n    # run when a message is seen\n    *PRIVMSG*)\n\n      echo \"$res\"\n      who=$(echo \"$res\" | perl -pe \"s/:(.*)\\!.*@.*/\\1/\")\n      from=$(echo \"$res\" | perl -pe \"s/.*PRIVMSG (.*[#]?([a-zA-Z]|\\-)*) :.*/\\1/\")\n      cmd=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:#\\s(.*?)\\r/\\1/\")\n      prefix=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:(#)\\s.*/\\1/\")\n      link=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:.*?(http.*?)\\s.*/\\1/\")\n      com=\"sh\"\n      cmd=\"$cmd 2>&1 | sed 's/.\\/.bot.sh: line 43: //'\"\n      cmd=\n      i=\"0\"\n      \n      #if [ \"$link\" -gt \"\" ]\n      #then\n      #  ./getTitle.sh $link >> $input\n      #fi\n      \n      if [ \"$prefix\" = '#' ]\n      then\n        echo 1 >> /home/ubuntu/workspace/.output.txt\n        eval $cmd > /home/ubuntu/workspace/.output.txt\n        while read p; do\n            if [ $i -lt 10 ]\n              then\n              echo \"PRIVMSG $from :\"$p >> $input\n              sleep 0.8\n            fi\n            i=$[$i+1]\n        done </home/ubuntu/workspace/.output.txt\n      fi\n\n    ;;\n\n    *)\n      echo \"$res\"\n    ;;\n  esac\ndone\n","undoManager":{"mark":95,"position":100,"stack":[[{"start":{"row":41,"column":13},"end":{"row":41,"column":14},"action":"insert","lines":["$"],"id":205}],[{"start":{"row":41,"column":14},"end":{"row":41,"column":15},"action":"insert","lines":["r"],"id":206}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["e"],"id":207}],[{"start":{"row":41,"column":16},"end":{"row":41,"column":17},"action":"insert","lines":["s"],"id":208}],[{"start":{"row":41,"column":5},"end":{"row":41,"column":6},"action":"insert","lines":["/"],"id":209}],[{"start":{"row":41,"column":6},"end":{"row":41,"column":7},"action":"insert","lines":["."],"id":210}],[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"insert","lines":["'"],"id":211}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["'"],"id":212}],[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"insert","lines":["{"],"id":213}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"remove","lines":["s"],"id":214}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["}"],"id":215}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["s"],"id":216}],[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"remove","lines":["}"],"id":217}],[{"start":{"row":41,"column":17},"end":{"row":41,"column":18},"action":"remove","lines":["{"],"id":218}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"remove","lines":["'"],"id":219}],[{"start":{"row":41,"column":15},"end":{"row":41,"column":16},"action":"insert","lines":["\""],"id":220}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"remove","lines":["'"],"id":221}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["\""],"id":222}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":21},"action":"remove","lines":["    ./.loop.sh \"$res\""],"id":223},{"start":{"row":41,"column":0},"end":{"row":68,"column":8},"action":"insert","lines":["      echo \"$res\"","      who=$(echo \"$res\" | perl -pe \"s/:(.*)\\!.*@.*/\\1/\")","      from=$(echo \"$res\" | perl -pe \"s/.*PRIVMSG (.*[#]?([a-zA-Z]|\\-)*) :.*/\\1/\")","      cmd=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:#sh\\s(.*?)\\r/\\1/\")","      prefix=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:(#sh)\\s.*/\\1/\")","      link=$(echo \"$res\" | perl -pe \"s/^.*?PRIVMSG\\s#.*?:.*?(http.*?)\\s.*/\\1/\")","      com=\"sh\"","","      i=\"0\"","      ","      #if [ \"$link\" -gt \"\" ]","      #then","      #  ./getTitle.sh $link >> $input","      #fi","      ","      if [ \"$prefix\" = '#sh' ]","      then","        echo 1 >> /home/ubuntu/workspace/.output.txt","        eval $cmd > /home/ubuntu/workspace/.output.txt","        while read p; do","            if [ $i -lt 100 ]","              then","              echo \"PRIVMSG $from :\"$p >> $input","              sleep 0.8","            fi","            i=$[$i+1]","        done </home/ubuntu/workspace/.output.txt","      fi"]}],[{"start":{"row":56,"column":26},"end":{"row":56,"column":27},"action":"remove","lines":["h"],"id":224}],[{"start":{"row":56,"column":25},"end":{"row":56,"column":26},"action":"remove","lines":["s"],"id":225}],[{"start":{"row":45,"column":62},"end":{"row":45,"column":63},"action":"remove","lines":["h"],"id":226}],[{"start":{"row":45,"column":61},"end":{"row":45,"column":62},"action":"remove","lines":["s"],"id":227}],[{"start":{"row":44,"column":58},"end":{"row":44,"column":59},"action":"remove","lines":["h"],"id":228}],[{"start":{"row":44,"column":57},"end":{"row":44,"column":58},"action":"remove","lines":["s"],"id":229}],[{"start":{"row":61,"column":26},"end":{"row":61,"column":27},"action":"remove","lines":["0"],"id":230}],[{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"insert","lines":["  "],"id":231}],[{"start":{"row":48,"column":2},"end":{"row":48,"column":4},"action":"insert","lines":["  "],"id":232}],[{"start":{"row":48,"column":4},"end":{"row":48,"column":6},"action":"insert","lines":["  "],"id":233}],[{"start":{"row":48,"column":6},"end":{"row":48,"column":7},"action":"insert","lines":["c"],"id":234}],[{"start":{"row":48,"column":7},"end":{"row":48,"column":8},"action":"insert","lines":["m"],"id":235}],[{"start":{"row":48,"column":8},"end":{"row":48,"column":9},"action":"insert","lines":["d"],"id":236}],[{"start":{"row":48,"column":9},"end":{"row":48,"column":10},"action":"insert","lines":[" "],"id":237}],[{"start":{"row":48,"column":9},"end":{"row":48,"column":10},"action":"remove","lines":[" "],"id":238}],[{"start":{"row":48,"column":9},"end":{"row":48,"column":10},"action":"insert","lines":["="],"id":239}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":11},"action":"insert","lines":["$"],"id":240}],[{"start":{"row":48,"column":11},"end":{"row":48,"column":12},"action":"insert","lines":["c"],"id":241}],[{"start":{"row":48,"column":12},"end":{"row":48,"column":13},"action":"insert","lines":["m"],"id":242}],[{"start":{"row":48,"column":12},"end":{"row":48,"column":13},"action":"remove","lines":["m"],"id":243}],[{"start":{"row":48,"column":11},"end":{"row":48,"column":12},"action":"remove","lines":["c"],"id":244}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":11},"action":"remove","lines":["$"],"id":245}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":12},"action":"insert","lines":["\"\""],"id":246}],[{"start":{"row":48,"column":11},"end":{"row":48,"column":12},"action":"insert","lines":["$"],"id":247}],[{"start":{"row":48,"column":12},"end":{"row":48,"column":13},"action":"insert","lines":["c"],"id":248}],[{"start":{"row":48,"column":13},"end":{"row":48,"column":14},"action":"insert","lines":["m"],"id":249}],[{"start":{"row":48,"column":14},"end":{"row":48,"column":15},"action":"insert","lines":["d"],"id":250}],[{"start":{"row":48,"column":15},"end":{"row":48,"column":16},"action":"insert","lines":[" "],"id":251}],[{"start":{"row":48,"column":16},"end":{"row":48,"column":17},"action":"insert","lines":["2"],"id":252}],[{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":[">"],"id":253}],[{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["%"],"id":254}],[{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"remove","lines":["%"],"id":255}],[{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["&"],"id":256}],[{"start":{"row":48,"column":19},"end":{"row":48,"column":20},"action":"insert","lines":["1"],"id":257}],[{"start":{"row":31,"column":0},"end":{"row":32,"column":0},"action":"remove","lines":["      then",""],"id":258},{"start":{"row":30,"column":0},"end":{"row":31,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":30,"column":0},"end":{"row":31,"column":0},"action":"remove","lines":["      then",""],"id":259},{"start":{"row":29,"column":0},"end":{"row":30,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":29,"column":0},"end":{"row":30,"column":0},"action":"remove","lines":["      then",""],"id":260},{"start":{"row":28,"column":0},"end":{"row":29,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":28,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["      then",""],"id":261},{"start":{"row":27,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":27,"column":0},"end":{"row":28,"column":0},"action":"remove","lines":["      then",""],"id":262},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"remove","lines":["      then",""],"id":263},{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["      then",""]}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":11},"action":"insert","lines":["("],"id":264}],[{"start":{"row":48,"column":10},"end":{"row":48,"column":11},"action":"remove","lines":["("],"id":265}],[{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":[" "],"id":266}],[{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"insert","lines":["|"],"id":267}],[{"start":{"row":48,"column":22},"end":{"row":48,"column":23},"action":"insert","lines":[" "],"id":268}],[{"start":{"row":48,"column":23},"end":{"row":48,"column":24},"action":"insert","lines":["s"],"id":269}],[{"start":{"row":48,"column":24},"end":{"row":48,"column":25},"action":"insert","lines":["e"],"id":270}],[{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"insert","lines":["d"],"id":271}],[{"start":{"row":48,"column":26},"end":{"row":48,"column":27},"action":"insert","lines":[" "],"id":272}],[{"start":{"row":48,"column":27},"end":{"row":48,"column":28},"action":"insert","lines":["'"],"id":273}],[{"start":{"row":48,"column":28},"end":{"row":48,"column":29},"action":"insert","lines":["'"],"id":274}],[{"start":{"row":48,"column":28},"end":{"row":48,"column":29},"action":"insert","lines":["s"],"id":275}],[{"start":{"row":48,"column":29},"end":{"row":48,"column":30},"action":"insert","lines":["/"],"id":276}],[{"start":{"row":48,"column":30},"end":{"row":48,"column":31},"action":"insert","lines":["/"],"id":277}],[{"start":{"row":48,"column":31},"end":{"row":48,"column":32},"action":"insert","lines":["/"],"id":278}],[{"start":{"row":48,"column":30},"end":{"row":48,"column":50},"action":"insert","lines":["./.bot.sh: line 60: "],"id":279}],[{"start":{"row":48,"column":31},"end":{"row":48,"column":32},"action":"insert","lines":["\\"],"id":280}],[{"start":{"row":25,"column":9},"end":{"row":25,"column":10},"action":"remove","lines":["n"],"id":281}],[{"start":{"row":25,"column":8},"end":{"row":25,"column":9},"action":"remove","lines":["e"],"id":282}],[{"start":{"row":25,"column":7},"end":{"row":25,"column":8},"action":"remove","lines":["h"],"id":283}],[{"start":{"row":25,"column":6},"end":{"row":25,"column":7},"action":"remove","lines":["t"],"id":284}],[{"start":{"row":25,"column":4},"end":{"row":25,"column":6},"action":"remove","lines":["  "],"id":285}],[{"start":{"row":25,"column":2},"end":{"row":25,"column":4},"action":"remove","lines":["  "],"id":286}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"remove","lines":["  "],"id":287}],[{"start":{"row":24,"column":37},"end":{"row":25,"column":0},"action":"remove","lines":["",""],"id":288}],[{"start":{"row":22,"column":0},"end":{"row":35,"column":4},"action":"remove","lines":["    # for pings on nick/user","    *\"You have not\"*)","      echo \"JOIN #$channel\" >> $input","    ;;","    ","","    # run when someone joins","    *JOIN*) who=$(echo \"$res\" | perl -pe \"s/:(.*)\\!.*@.*/\\1/\")","      if [ \"$who\" = \"$nick\" ]","       continue ","      fi","      echo \"MODE #$channel +o $who\" >> $input","    ;;","    "],"id":289}],[{"start":{"row":21,"column":0},"end":{"row":22,"column":0},"action":"remove","lines":["",""],"id":290}],[{"start":{"row":20,"column":4},"end":{"row":21,"column":0},"action":"remove","lines":["",""],"id":291}],[{"start":{"row":20,"column":2},"end":{"row":20,"column":4},"action":"remove","lines":["  "],"id":292}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"remove","lines":["  "],"id":293}],[{"start":{"row":19,"column":6},"end":{"row":20,"column":0},"action":"remove","lines":["",""],"id":294}],[{"start":{"row":31,"column":47},"end":{"row":31,"column":49},"action":"remove","lines":["60"],"id":295}],[{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"insert","lines":["\\"],"id":296}],[{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"insert","lines":["d"],"id":297}],[{"start":{"row":31,"column":49},"end":{"row":31,"column":50},"action":"insert","lines":["+"],"id":298}],[{"start":{"row":31,"column":47},"end":{"row":31,"column":50},"action":"remove","lines":["\\d+"],"id":299},{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"insert","lines":["4"]}],[{"start":{"row":31,"column":48},"end":{"row":31,"column":49},"action":"insert","lines":["3"],"id":300}],[{"start":{"row":31,"column":55},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":301},{"start":{"row":32,"column":0},"end":{"row":32,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":32,"column":6},"end":{"row":32,"column":7},"action":"insert","lines":["c"],"id":302}],[{"start":{"row":32,"column":7},"end":{"row":32,"column":8},"action":"insert","lines":["m"],"id":303}],[{"start":{"row":32,"column":8},"end":{"row":32,"column":9},"action":"insert","lines":["d"],"id":304}],[{"start":{"row":32,"column":9},"end":{"row":32,"column":10},"action":"insert","lines":["="],"id":305}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":32,"column":10},"end":{"row":32,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1432748090000}